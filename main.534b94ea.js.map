{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","tableBody","isASC","sortColumnIndex","getProcessedCellValue","row","targetIndex","cell","querySelectorAll","innerText","replace","addEventListener","e","target","matches","cellIndex","rows","Array","from","sort","a","b","firstCell","secondCell","localeCompare","innerHTML","append","forEach","classList","remove","parentNode","add","insertAdjacentHTML","form","formName","formPosition","formAge","formOffice","formSalary","formButton","preventDefault","value","length","pushNotification","age","parseInt","isNaN","salary","parseFloat","toLocaleString","reset","title","description","type","body","notification","createElement","dataset","qa","style","top","right","setTimeout","index","text","textContent","input","selectCity","option","city","focus","NAME_INDEX","POSITION_INDEX","OFFICE_INDEX","AGE_INDEX","SALARY_INDEX","Number","eventEnter","key","blur"],"mappings":"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","file":"main.534b94ea.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst tableBody = table.querySelector('tbody');\n\nlet isASC = true;\nlet sortColumnIndex = null;\n\n// SORT\n\ntable.addEventListener('click', (e) => {\n  if (!e.target.matches('th')) {\n    return;\n  }\n\n  const targetIndex = e.target.cellIndex;\n\n  const ageNumberCell = 3;\n  const salaryNumberCell = 4;\n\n  if (sortColumnIndex === targetIndex) {\n    isASC = !isASC;\n  } else {\n    isASC = true;\n    sortColumnIndex = targetIndex;\n  }\n\n  const rows = Array.from(tableBody.rows);\n\n  rows.sort((a, b) => {\n    const firstCell = getProcessedCellValue(a, sortColumnIndex);\n    const secondCell = getProcessedCellValue(b, sortColumnIndex);\n\n    if (sortColumnIndex === ageNumberCell\n      || sortColumnIndex === salaryNumberCell) {\n      return isASC ? firstCell - secondCell : secondCell - firstCell;\n    }\n\n    return isASC\n      ? firstCell.localeCompare(secondCell)\n      : secondCell.localeCompare(firstCell);\n  });\n\n  tableBody.innerHTML = '';\n  tableBody.append(...rows);\n});\n\nfunction getProcessedCellValue(row, targetIndex) {\n  const cell = row.querySelectorAll('td')[targetIndex];\n\n  return cell.innerText.replace(/[$,]/g, '');\n}\n\n// SELECTED ROW\n\ntableBody.addEventListener('click', (e) => {\n  const rows = tableBody.querySelectorAll('tr');\n\n  rows.forEach((row) => {\n    row.classList.remove('active');\n  });\n  e.target.parentNode.classList.add('active');\n});\n\n// CREATE FORM\n\ntable.insertAdjacentHTML(\n  'afterend',\n  `\n  <form\n    class=\"new-employee-form\"\n    action=\"/\"\n    method=\"get\"\n  >\n    <label>\n      Name:\n        <input\n          name=\"name\"\n          type=\"text\"\n          required\n          data-qa=\"name\"\n        >\n    </label>\n    <label>\n      Position:\n      <input\n        name=\"position\"\n        type=\"text\"\n        required\n        data-qa=\"position\"\n      >\n    </label>\n    <label for=\"office\">\n      Office:\n      <select\n        name=\"office\"\n        required\n        data-qa=\"office\"\n      >\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n    <label>\n      Age:\n      <input\n        name=\"age\"\n        type=\"number\"\n        required\n        data-qa=\"age\"\n      >\n    </label>\n    <label>\n      Salary:\n      <input\n        name=\"salary\"\n        type=\"number\"\n        required\n        data-qa=\"salary\"\n      >\n    </label>\n    <button type=\"submit\"> Save to table </button>\n  </form>\n`,\n);\n\n// ADDING A NEW EMPLOYEE\n\nconst form = document.querySelector('.new-employee-form');\nconst formName = form.querySelector('[data-qa=\"name\"]');\nconst formPosition = form.querySelector('[data-qa=\"position\"]');\nconst formAge = form.querySelector('[data-qa=\"age\"]');\nconst formOffice = form.querySelector('[data-qa=\"office\"]');\nconst formSalary = form.querySelector('[data-qa=\"salary\"]');\nconst formButton = form.querySelector('button');\n\nformButton.addEventListener('click', (e) => {\n  e.preventDefault();\n\n  if (formName.value.length < 4) {\n    pushNotification(\n      `The name was entered incorrectly.`,\n      `Name length should be at least 4 letters`,\n      'error',\n    );\n\n    return;\n  }\n\n  const age = parseInt(formAge.value);\n\n  if (isNaN(age) || age < 18 || age > 90) {\n    pushNotification(\n      `The age was entered incorrectly!`,\n      `The age of the employee must be within 18-90 years.`,\n      'error',\n    );\n\n    return;\n  }\n\n  const salary = parseFloat(formSalary.value);\n\n  if (isNaN(salary) || salary < 100) {\n    pushNotification(\n      `The employee's salary was entered incorrectly.`,\n      `The minimum salary should be $100.`,\n      'error',\n    );\n\n    return;\n  }\n\n  document.querySelector('tbody').insertAdjacentHTML(\n    'beforeend',\n    `\n    <tr>\n      <td>${formName.value}</td>\n      <td>${formPosition.value}</td>\n      <td>${formOffice.value}</td>\n      <td>${age}</td>\n      <td>$${salary.toLocaleString('en-US')}</td>\n    </tr>\n  `,\n  );\n\n  pushNotification(`Successful!`,\n    `New employee is successfully added to the table`,\n    'success'\n  );\n\n  form.reset();\n});\n\n// NOTIFICATION\nconst pushNotification = (title, description, type) => {\n  const body = document.querySelector('body');\n  const notification = document.createElement('div');\n\n  notification.dataset.qa = 'notification';\n  notification.classList.add('notification', `${type}`);\n  notification.style.top = `5px`;\n  notification.style.right = `5px`;\n\n  notification.insertAdjacentHTML(\n    'beforeend',\n    `\n      <h2 class=\"title\">\n        ${title}\n      </h2>\n      <p>\n        ${description}\n      </p>\n    `,\n  );\n\n  body.append(notification);\n\n  setTimeout(() => notification.remove(), 5000);\n};\n\n//  EDITING BY DOUBLE-CLICK\n\ntableBody.addEventListener('dblclick', (e) => {\n  const index = e.target.cellIndex;\n  const text = e.target.textContent;\n\n  const NAME_INDEX = 0;\n  const POSITION_INDEX = 1;\n  const OFFICE_INDEX = 2;\n  const AGE_INDEX = 3;\n  const SALARY_INDEX = 4;\n\n  e.target.textContent = '';\n\n  let input = document.createElement('input');\n\n  input.classList.add('cell-input');\n\n  if (index === OFFICE_INDEX) {\n    const selectCity = document.createElement('select');\n    const cities = [\n      `Tokyo`,\n      `Singapore`,\n      `London`,\n      `New York`,\n      `Edinburgh`,\n      `San Francisco`,\n    ];\n\n    cities.forEach((option) => {\n      const city = document.createElement('option');\n\n      city.textContent = option;\n      selectCity.append(city);\n    });\n    input = selectCity;\n  }\n\n  e.target.append(input);\n  input.focus();\n\n  input.addEventListener('blur', () => {\n    switch (index) {\n      case NAME_INDEX:\n        if (input.value.length < 4) {\n          pushNotification(\n            `The name was entered incorrectly.`,\n            `Name length should be at least 4 letters`,\n            'error',\n          );\n\n          e.target.textContent = text;\n        } else {\n          e.target.textContent = input.value;\n        }\n\n        break;\n\n      case POSITION_INDEX:\n        if (input.value.length < 4) {\n          pushNotification(\n            `The position was entered incorrectly.`,\n            `Position length should be at least 4 letters`,\n            'error',\n          );\n\n          e.target.textContent = text;\n        } else {\n          e.target.textContent = input.value;\n        }\n\n        break;\n\n      case OFFICE_INDEX:\n        if (input.value) {\n          e.target.textContent = input.value;\n        } else {\n          e.target.textContent = text;\n        }\n\n        break;\n\n      case AGE_INDEX:\n        if (isNaN(input.value) || input.value < 18 || input.value > 90) {\n          pushNotification(\n            `The age was entered incorrectly!`,\n            `The age of the employee must be within 18-90 years.`,\n            'error',\n          );\n\n          e.target.textContent = text;\n        } else {\n          e.target.textContent = input.value;\n        }\n\n        break;\n\n      case SALARY_INDEX:\n        if (isNaN(input.value) || input.value < 100) {\n          pushNotification(\n            `The employee's salary was entered incorrectly.`,\n            `The minimum salary should be $100.`,\n            'error',\n          );\n          e.target.textContent = text;\n        } else {\n          e.target.textContent = '$'\n            + Number(input.value).toLocaleString('en-US');\n        }\n\n        break;\n    }\n\n    input.remove();\n  });\n\n  input.addEventListener('keydown', (eventEnter) => {\n    if (eventEnter.key === 'Enter') {\n      input.blur();\n    }\n  });\n});\n"]}